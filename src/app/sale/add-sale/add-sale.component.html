





<div class="container pop-box1">


  <!-- The Modal -->
  <div class="modal" id="myModal3">
    <div class="modal-dialog">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title"> Produit 1</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <div class="row">
            <div class="col col-4">
              Quantité

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Prix unitaire

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Type de remise


            </div>
            <div class="col">

              <div class="dropdown dropdown1 show">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  %
                </a>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                  <a class="dropdown-item" href="#">%</a>
                  <a class="dropdown-item" href="#">Montant</a>
                </div>
              </div>

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Remise


            </div>
            <div class="col">

              <input type="number" name="" id="">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Rem. U.G.


            </div>
            <div class="col">

              <input type="number" name="" id="">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Disponible


            </div>
            <div class="col">

              <input type="number" value="0">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Base de remboursement

            </div>
            <div class="col">

              <input type="text">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Taux Remb.

            </div>
            <div class="col">

              <input type="text">

            </div>
          </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="annuler-btn">Entrer</button>
        </div>

      </div>
    </div>
  </div>




</div>
<div class="container pop-box1">


  <!-- The Modal -->
  <div class="modal" id="myModal4">
    <div class="modal-dialog">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title"> Produit 2</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <div class="row">
            <div class="col col-4">
              Quantité

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Prix unitaire

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Type de remise


            </div>
            <div class="col">

              <div class="dropdown dropdown1 show">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  %
                </a>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                  <a class="dropdown-item" href="#">%</a>
                  <a class="dropdown-item" href="#">Montant</a>
                </div>
              </div>

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Remise


            </div>
            <div class="col">

              <input type="number" name="" id="">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Rem. U.G.


            </div>
            <div class="col">

              <input type="number" name="" id="">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Disponible


            </div>
            <div class="col">

              <input type="number" value="0">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Base de remboursement

            </div>
            <div class="col">

              <input type="text">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Taux Remb.

            </div>
            <div class="col">

              <input type="text">

            </div>
          </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="annuler-btn">Entrer</button>
        </div>

      </div>
    </div>
  </div>




</div>
<div class="container pop-box1">


  <!-- The Modal -->
  <div class="modal" id="myModal5">
    <div class="modal-dialog">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title"> Produit 3</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <div class="row">
            <div class="col col-4">
              Quantité

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Prix unitaire

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Type de remise


            </div>
            <div class="col">

              <div class="dropdown dropdown1 show">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  %
                </a>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                  <a class="dropdown-item" href="#">%</a>
                  <a class="dropdown-item" href="#">Montant</a>
                </div>
              </div>

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Remise


            </div>
            <div class="col">

              <input type="number" name="" id="">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Rem. U.G.


            </div>
            <div class="col">

              <input type="number" name="" id="">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Disponible


            </div>
            <div class="col">

              <input type="number" value="0">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Base de remboursement

            </div>
            <div class="col">

              <input type="text">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Taux Remb.

            </div>
            <div class="col">

              <input type="text">

            </div>
          </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class="annuler-btn">Entrer</button>
        </div>

      </div>
    </div>
  </div>




</div>
<!-- place product sale dialog here -->


<div class="container pop-box1">


  <!-- The Modal -->
  <div class="modal" id="myModal7">
    <div class="modal-dialog">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">ASPIRINE VITAMINEE CO 330MG /200MG B20 COMP EFFER</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <div class="row">
            <div class="col col-4">
              Calcul automatique

            </div>
            <div class="col">

              <input type="checkbox" class="checkbox-nw">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              PPH

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>

          <div class="row">
            <div class="col col-4">
              PPH

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Zone


            </div>
            <div class="col">

              <div class="dropdown dropdown1 show">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  Aucun
                </a>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                  <a class="dropdown-item" href="#">Comprimés</a>
                  <a class="dropdown-item" href="#">Aucun</a>
                </div>
              </div>

            </div>
          </div>

          <br>
          <div class="row">
            <div class="col col-4">
              Stock min


            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Stock max


            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Date de péremption


            </div>
            <div class="col">

              <input type="date">

            </div>
          </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class=" annuler-btn">Page produit</button>
          <button type="button" class="annuler-btn">Sauvegarder</button>
        </div>

      </div>
    </div>
  </div>




</div>
<div class="container pop-box1">


  <!-- The Modal -->
  <div class="modal" id="myModal8">
    <div class="modal-dialog">
      <div class="modal-content">

        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">ASPIRINE VITAMINEE CO 330MG /200MG B20 COMP EFFER</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>

        <!-- Modal body -->
        <div class="modal-body">
          <div class="row">
            <div class="col col-4">
              Calcul automatique

            </div>
            <div class="col">

              <input type="checkbox" class="checkbox-nw">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              PPH

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>

          <div class="row">
            <div class="col col-4">
              PPH

            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Zone


            </div>
            <div class="col">

              <div class="dropdown dropdown1 show">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  Aucun
                </a>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                  <a class="dropdown-item" href="#">Comprimés</a>
                  <a class="dropdown-item" href="#">Aucun</a>
                </div>
              </div>

            </div>
          </div>

          <br>
          <div class="row">
            <div class="col col-4">
              Stock min


            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Stock max


            </div>
            <div class="col">

              <input type="number">

            </div>
          </div>
          <br>
          <div class="row">
            <div class="col col-4">
              Date de péremption


            </div>
            <div class="col">

              <input type="date">

            </div>
          </div>
        </div>

        <!-- Modal footer -->
        <div class="modal-footer">
          <button type="button" class=" annuler-btn">Page produit</button>
          <button type="button" class="annuler-btn">Sauvegarder</button>
        </div>

      </div>
    </div>
  </div>
</div>

<!-- Page content holder -->
<div class="p-51"></div>
<div class="page-content p-5" id="content">
  <div *ngIf="isProductSubmitedEmpty" style="width: 100%; margin-top: .25rem; font-size: 80%;color: #dc3545;">
    <div id="header_notification" class="notification notif_error __web-inspector-hide-shortcut__" style="overflow: hidden;">
     <div id="notif_error_content" class="notif_error_content">
           <!-- <span style="vertical-align:middle; display: inline-block; margin-right: 10px">
               <img src="/images/notif_error.png" style="margin-top: 0;">
           </span> -->
       <p class="notification_msg" style="display: inline-block;">Vous devez choisir au moins un produit avec une quantité supérieur à 0.</p>
     </div>
   </div>
   </div>

  <!-- Toggle button -->
  <button id="sidebarCollapse" type="button" class="btn btn-light bg-white rounded-pill shadow-sm px-4 mb-4"><i class="fa fa-bars mr-2"></i></button>

  <div class="container-fluid">

    <div class="row">
      <div class="col-10 page-head col-md-7">
        <h2>Créer une nouvelle vente </h2>
      </div>

      <div class=" col col-2 col-md-1 cmnpad">
        <div class="dropdown show dropright ">
          <a class="btn btn-secondary dropdown-toggle bell-icon-dd" href="#" role="button" id="dropdownMenuLink"
            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <img src="../../../assets/Icons/bell.png" alt="Notification" class="bell-icon">
          </a>

          <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
            <a class="dropdown-item" href="#">Action</a>
            <a class="dropdown-item" href="#">Another action</a>
            <a class="dropdown-item" href="#">Something else here</a>
          </div>
        </div>
      </div>
      <div class=" col col-12 buttons-aic col-md-2 cmnpad">
        <div class="box1 boxes12">
          Brouillon
        </div>
      </div>
      <div class=" col col-12 col-md-2 buttons-aic  cmnpad">
        <div class="creer">
          <a href="#">
            <button class="creerbtn" (click)="approveSales()" >
              Approuver
            </button>
          </a>
        </div>
      </div>
    </div>
    <br>
    <div class="row">
      <div class="col col-md-6">

        <div class="row">
          <div class="col">

            <div class="cus-search-bar">
              <div class="row">

                <div class="col-2 col-md-1 col ">
                  <div class="customer-icon">
                    <i class="fas fa-user-circle "></i>
                  </div>

                </div>

                <div class="col-10  col col-md-2 customer-col ">
                  <span class="customer-tag align-middle">
                    Client
                  </span>
                </div>

                <div class="col-12 col-md-9 justify-content-end ">
                  <div class="box544">
                    <input type="text" data-toggle="modal" (click)="openCustomerModelWithComponent()" [(ngModel)]="customerName">
                    <button class="searchbtn"><i class="fas fa-search"></i></button>
                    <button class="crossbtn"> <i class="fas fa-times"></i></button>
                  </div>

                </div>
              </div>
            </div>


          </div>
        </div>
        <br>
        <div class="row">
          <div class="col">

            <div class="creat-box">

              <div class="row">


                <div class="col col-sm-3">
                  <div class="dropdown show">
                    <ng-select [ngClass]="'overFlowSelect'" [clearable]="true" [items]="dci" bindValue="id"
                    bindLabel="name" name="dci" [(ngModel)]="productSearchFields.dci" [placeholder]="'dci'" [virtualScroll]="true"
                      [appendTo]="'body'">
                    </ng-select>
                  </div>
                </div>

                <div class="col">
                  <div class="barcode-inp creer-inp">
                    <input type="text" placeholder=" Barcode"  [(ngModel)]="productSearchFields.barcode">
                  </div>

                </div>


              </div>

              <div class="row  row-top-mar">

                <div class="col-6 col-md-3 ">
                  <div class="last-name creer-inp">
                    <div class="dropdown dropdown1 show">
                      <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">

                        Contient

                      </a>

                      <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                        <a class="dropdown-item" href="#">Contient</a>
                        <a class="dropdown-item" href="#">Commencer avec</a>
                      </div>
                    </div>

                  </div>
                </div>

                <div class="col-6 col-md-3 ">
                  <div class="last-name creer-inp">
                    <input type="text" placeholder="Nom"  [(ngModel)]="productSearchFields.name">

                  </div>
                </div>

                <div class="col-6 col-md-2 ">
                  <div class="last-name creer-inp">
                    <input type="text" placeholder="PPV" [(ngModel)]="productSearchFields.ppv">

                  </div>
                </div>

                <div class="col-6 col-md-2 mar-top-res">
                  <div class="dropdown dropdown1 show">
                    <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Zone
                    </a>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                      <a class="dropdown-item" href="#">Zone</a>
                    </div>
                  </div>
                </div>
              </div>
              <!--<td><button (click)="searchItems()"><i class="fas fa-search"></i></button></td> -->
              <div class="row row-top-mar">
                <div class="col ">
                  <button class="etr-btn"  (click)="searchProducts()">Entrer</button>
                </div>
              </div>
              <br>
              <hr>

              <div class="row">
                <div class="col">
                  <div class="invoice-table">
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th scope="col">Nom</th>
                          <th scope="col">Forme</th>
                          <th scope="col">PPV</th>
                          <th scope="col">Zoné </th>
                          <th scope="col">Disp. </th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr *ngFor="let item of productList" >
                          <input type="hidden" value="{{ item.quantity }}" >
                          <td (click)="purchaseProduct(item)">{{ item.name }}</td>
                          <td (click)="purchaseProduct(item)">{{ item.pharmaceuticalForm?.name}}</td>
                          <td (click)="purchaseProduct(item)">{{ item.ppv}}</td>
                          <td (click)="purchaseProduct(item)" class=" active-sign"> <span class="active-Y">Oui</span> </td>
                          <td (click)="purchaseProduct(item)" class="neg-disp-sign"> <span class="neg-disp"> -1</span></td>
                          <td> <a class="fa fa-pencil" (click)="openProductdSaleDetailsModelWithComponent(item)"> </a></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

        </div>
        <br>
        <div class="row">
          <div class="col">
            <div class="creat-box">
              <div class="row">
                <div class="col">
                  <div class="Afficher-filt">
                    Afficher uniquement les produits utilisés :
                  </div>
                  <input type="checkbox" class="checkbox-nw">
                </div>
                <div class="col col-md-6 col-12">
                  <div *ngIf="utilityService.pagination" class="mt-1">
                    <app-pagination
                      [pagination]="utilityService.pagination"
                      (pageNumberChanged)="loadLst($event)">
                    </app-pagination>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col col-md-6">



        <div class="row">
          <div class="col">

            <div class="cus-search-bar">
              <div class="row">
                <div class="col">
                  Référence de livraison
                </div>
                <div class="col">
                  Gestionnaire
                </div>
              </div>
              <div class="row">
                <div class="col">
                  <input type="text" class="date-inp">
                </div>
                <div class="col">
                  <div class="dropdown dropdown1 show ">
                    <a class="btn btn-secondary dropdown-toggle cus-dd" href="#" role="button" id="dropdownMenuLink"
                      data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Zoné
                    </a>

                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                      <a class="dropdown-item" href="#">Contient</a>
                      <a class="dropdown-item" href="#">Commencer avec</a>
                    </div>
                  </div>
                </div>

              </div>
            </div>
          </div>

        </div>
        <br>
        <div class="row">
          <div class="col">
            <div class="creat-box">

              <div class="row">
                <div class="col col-5">

                  <p class="total-tags">TOTAL À PAYER</p>
                  <div class="R-popup" data-toggle="modal" (click)="openGlobalDiscountDialog()">R</div>

                </div>

                <div class="col col-5">

                  <div class="total-amount ">
                    {{totalAmount  | number:'1.0-2' }}
                  </div>

                </div>
                <div class="col col-1">
                  <div class="upward-aarow">
                    <i class="fas fa-arrow-alt-circle-up"></i>
                  </div>

                </div>
              </div>
              <hr>


              <div class="row">
                <div class="col col-sm-3">
                  <p class="total-tags-all">
                    Quantité totale
                  </p>
                </div>

                <div class="col col-sm-3">
                  <div class="total-qty total-tags-all">
                    2 Units
                  </div>
                </div>

              </div>
              <hr>
              <div class="row">
                <div class="col">
                  <div class="invoice-table">
                    <table class="table table-striped">
                      <thead>
                        <tr>
                          <th scope="col"></th>
                          <th scope="col">Produit</th>
                          <th scope="col">PU</th>
                          <th scope="col">PPV</th>
                          <th scope="col">Disp.</th>
                          <th scope="col">Total</th>
                        </tr>
                      </thead>
                      <tbody>
                        <!-- <div *ngFor="let item of saleProductList; let i = index" [attr.data-index]="i">  -->
                        <tr class="edit-menuRW edit-menuRW1" *ngFor="let item of saleProductList; let i = index"  (click)="openProductQuantityDetailsModelWithComponent(item, i)" >
                          <td>{{ item.quantity }}</td>
                          <td>{{ item.name }}</td>
                          <td>{{ item.ppu}}
                            <div *ngIf="item.isDiscountAvaiable" class="table-badge discount_sticker" >{{ item.percentage | number:'1.0-0'}} % = {{item.dicountAmount | number:'1.0-2'}}</div>
                          </td>
                          <td>{{ item.ppv}}</td>
                          <td class="neg-disp-sign"> <span class="neg-disp"> -1</span></td>
                          <td>{{ item.ppv}}</td>
                          <td>
                            <div class="edit-btn" data-toggle="modal" data-target="#myModal6"><i class="fas fa-pen"></i></div>
                          </td>
                          <td>
                            <div class="cross-btn"><a class="fa fa-times" (click)="deleteSaleProduct(item)"> </a></div>
                          </td>
                        </tr>
                        <!-- <tr  *ngIf="itemsVisibility">
                        <table class="table table-striped" >
                          <tbody class="tbody-inp">

                            <tr >
                              <td colspan="10">
                                <div class="rem-edit rem-edit1">
                                    <div class="cross-btn rem-edit-child"><i class="fas fa-times"></i></div>
                                </div>

                              </td>
                            </tr>
                            <tr>
                              <td><div>Quantité</div><input type="number"></td>
                              <td><div>Prix unitaire</div><input type="number"></td>
                              <td><div>Remise</div><input type="number"></td>

                            </tr>
                            <tr>
                              <td><div>Rem. U.G.</div><input type="number"></td>
                              <td><div>Disponible</div><input type="number"></td>

                              <td>
                                <div> Type de remise</div>


                                  <div class="dropdown dropdown1 show">
                                    <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    %
                                    </a>

                                    <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                                      <a class="dropdown-item" href="#">%</a>
                                      <a class="dropdown-item" href="#">Montant</a>
                                    </div>
                                  </div>
                              </td>



                            </tr>

                            <tr>
                              <td><div>Base de remboursement</div><input type="number"></td>
                              <td><div>Taux Remb. </div><input type="number"></td>
                                <td>
                                  <div>Date de péremption</div>
                                  <input type="date">
                                </td>
                            </tr>
                            <tr>
                              <td colspan="10 ">
                                <button class="etr-btn">Entrer</button>
                              </td>

                            </tr>
                          </tbody>
                        </table>
                      </tr>  -->
                    <!-- </div> -->
                      </tbody>
                    </table>

                  </div>

                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<br>

<div class="container-fluid">
  <div class="clear-fix">
    <div class="row justify-content-end">

      <div class="col faq col-sm-1  ">
        <div class="faqbox">
          <a href="#">
            <button class="faqbtn">FAQ</button>
          </a>
        </div>
      </div>

      <div class="col supportnum col-sm-2 float-right " style="position:relative">
        <div class="sptnumbox">
          <p>Soutien: 99 99 999 999</p>
        </div>
      </div>
    </div>
  </div>

</div>
